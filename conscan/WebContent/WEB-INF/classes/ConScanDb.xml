<?xml version="1.0" encoding="UTF-8"?>

<schema name="ConScan">
	<table name="staff">
		<column name="staffid" type="id"/>
		<column name="firstname" type="string" length="100"/>
		<column name="lastname" type="string" length="100"/>
		<column name="badgenumber" type="string" length="100"/>
		<column name="email" type="string" length="100"/>
		<column name="password" type="string" length="100"/>
		<column name="created" type="date"/>
		<column name="modified" type="date"/>
		<constraint name="pk_staff" type="primary">
			<column name="staffid"/>
		</constraint>
	</table>
	<table name="compliance">
		<column name="complianceid" type="id"/>
		<column name="name" type="string" length="100"/>
		<constraint name="pk_compliance" type="primary">
			<column name="complianceid"/>
		</constraint>
	</table>
	<table name="compliancevalue">
		<column name="compliancevalueid" type="id"/>
		<column name="complianceid" type="idref"/>
		<column name="value" type="string" length="100"/>
		<constraint name="pk_compliancevalue" type="primary">
			<column name="compliancevalueid"/>
		</constraint>
		<constraint name="fk_compliancevalue_compliance" type="foreign">
			<column name="complianceid"/>
			<table name="compliance">
				<column name="complianceid"/>
			</table>
		</constraint>
	</table>
	<table name="activity">
		<column name="activityid" type="id"/>
		<column name="complianceid" type="idref"/>
		<constraint name="pk_activity" type="primary">
			<column name="activityid"/>
		</constraint>
		<constraint name="fk_activity_compliance" type="foreign">
			<column name="activityid"/>
			<table name="compliance">
				<column name="complianceid"/>
			</table>
		</constraint>
	</table>
	<table name="log">
		<column name="logid" type="id"/>
		<column name="staffid" type="idref"/>
		<column name="activityid" type="idref"/>
		<column name="compliancevalueid" type="idref"/>
		<constraint name="pk_log" type="primary">
			<column name="logid"/>
		</constraint>
		<constraint name="fk_log_staff" type="foreign">
			<column name="staffid"/>
			<table name="staff">
				<column name="staffid"/>
			</table>
		</constraint>
		<constraint name="fk_log_activity" type="foreign">
			<column name="activityid"/>
			<table name="activity">
				<column name="activityid"/>
			</table>
		</constraint>
		<constraint name="fk_log_compliancevalue" type="foreign">
			<column name="compliancevalueid"/>
			<table name="compliancevalue">
				<column name="compliancevalueid"/>
			</table>
		</constraint>
	</table>
</schema>